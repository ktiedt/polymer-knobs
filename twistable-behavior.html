<!--
@license
Copyright (c) 2015 Teo Maragakis. All rights reserved.
This code may only be used under the MIT style license found at https://raw.githubusercontent.com/teomaragakis/polymer-knobs/master/LICENSE
The complete set of authors may be found at [n/a] #todo
The complete set of contributors may be found at [n/a] #todo
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at [n/a] #todo
-->
<link rel="import" href="../polymer/polymer.html">
<script>
  TwistableBehavior = {
    properties: {
      /**
       * `angle` defines the knob's maximum angle in degrees. Has a maximum of 180 (half a circle).
       */
      angle: {
        type: Number,
        value: 90
      }
    },
    listeners: {
      'wheel': 'handleWheel'
    },
    ready: function() {
      if (this.angle > 180)
      this.angle = 180;
    },
    handleWheel: function(e) {
      var deltaSum = e.deltaY;
      deltaSum += e.deltaX;
      this.rotate(deltaSum);
    },
    rotate: function(rotation) {
      rotation = Math.min(Math.max(parseInt(rotation), this.angle * -1), this.angle);
      this.$.chamfer.style.transform = 'rotate('+ rotation +'deg)';
    }
  };
</script>